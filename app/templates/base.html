<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Historical Document Reader{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-yHnj4MvlYYKxE/6q9ZsH5mJ5RkJyKpjtXHYQVdG1Vl6HjnAsfsj0G9aJv1bQZoKEtZnSmhMWj58ZwFZJe61D1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    {% block styles %}{% endblock %}
</head>
<body class="{% block body_class %}{% endblock %}">
    <header class="site-header">
        <div class="site-header__inner">
            <a href="{{ url_for('index') }}" class="site-brand" aria-label="Historical Document Reader home" data-help="Return to the application home page.">
                Historical Document Reader
            </a>
            <nav class="primary-nav" aria-label="Primary navigation">
                {# Shared nav help text ensures AppHelpTooltips has consistent targets on every page. #}
                <ul>
                    <li><a href="{{ url_for('index') }}" data-help="Go to the dashboard landing page.">Home</a></li>
                    <li><a href="{{ url_for('search_database') }}" data-help="Search documents with fielded and boolean queries.">Search Database</a></li>
                    <li><a href="{{ url_for('historian_agent_page') }}" data-help="Ask research questions and run AI-assisted analysis.">Historian Agent</a></li>
                    <li><a href="{{ url_for('corpus_explorer_page') }}" data-help="Generate corpus-level themes, questions, and patterns.">Corpus Explorer</a></li>
                    <li><a href="{{ url_for('network_analysis_page') }}" data-help="Explore entity networks and connected records.">Network Analysis</a></li>
                    <li><a href="{{ url_for('demographics_page') }}" data-help="Browse aggregate statistics and demographics for all persons in the corpus.">Demographics</a></li> {# Added demographics entrypoint in primary nav for direct access. #}
                    <li><a href="{{ url_for('database_info') }}" data-help="Review database collections, counts, and metadata.">Database Information</a></li>
                    <li><a href="{{ url_for('settings') }}" data-help="Configure ingestion, models, and system options.">Settings</a></li>
                    <li><a href="{{ url_for('help_page') }}" data-help="Open usage guidance and troubleshooting notes.">Help</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="site-main">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="container flash-messages" role="alert">
                <ul>
                    {% for category, message in messages %}
                    <li class="flash flash--{{ category }}">{{ message }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
    </main>

    {# Global tooltip standard used by network analysis and shared UI controls. #}
    <script src="{{ url_for('static', filename='js/help-tooltips.js') }}"></script>
    {% block scripts %}{% endblock %}
</body>
</html>
