{% extends 'base.html' %}
{% block title %}Home Â· Historical Document Reader{% endblock %}

{% block content %}
<div class="container home">
    
    <section class="home-hero">
        <h1>Welcome to the Historical Document Reader</h1>
        <p class="home-hero__lead">Explore digitised archives, surface relevant records with full-text search, and interrogate the collection using the Historian Agent.</p>
        <div class="home-hero__actions">
            <a class="button" href="{{ url_for('search_database') }}">Start searching</a>
            <a class="button button--secondary" href="{{ url_for('historian_agent_page') }}">Chat with the Historian Agent</a>
        </div>
    </section>

    
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
(function() {
    const triggers = Array.from(document.querySelectorAll('.home-tabs__trigger'));
    const panels = Array.from(document.querySelectorAll('.home-tab-panel'));

    if (!triggers.length || !panels.length) {
        return;
    }

    function activate(targetId, trigger) {
        triggers.forEach(btn => {
            const isActive = btn === trigger;
            btn.classList.toggle('is-active', isActive);
            btn.setAttribute('aria-selected', isActive ? 'true' : 'false');
            btn.setAttribute('tabindex', isActive ? '0' : '-1');
        });

        panels.forEach(panel => {
            const shouldShow = panel.id === targetId;
            panel.classList.toggle('is-active', shouldShow);
            panel.toggleAttribute('hidden', !shouldShow);
            if (shouldShow) {
                panel.focus({ preventScroll: true });
            }
        });
    }

    triggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
            const targetId = trigger.getAttribute('data-target');
            if (!targetId) return;
            activate(targetId, trigger);
        });

        trigger.addEventListener('keydown', event => {
            if (event.key !== 'ArrowRight' && event.key !== 'ArrowLeft') {
                return;
            }

            const currentIndex = triggers.indexOf(trigger);
            const offset = event.key === 'ArrowRight' ? 1 : -1;
            const nextIndex = (currentIndex + offset + triggers.length) % triggers.length;
            const nextTrigger = triggers[nextIndex];
            nextTrigger.focus();
            const targetId = nextTrigger.getAttribute('data-target');
            if (targetId) {
                activate(targetId, nextTrigger);
            }
        });
    });
})();
</script>
{% endblock %}
